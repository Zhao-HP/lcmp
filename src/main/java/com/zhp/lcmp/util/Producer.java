package com.zhp.lcmp.util;

import com.alibaba.fastjson.JSON;
import com.alibaba.rocketmq.client.producer.DefaultMQProducer;
import com.alibaba.rocketmq.client.producer.SendResult;
import com.alibaba.rocketmq.common.message.Message;

public class Producer {

    public static void main(String[] args) {
        DefaultMQProducer producer = new DefaultMQProducer("qa-dev-deployment-consumer");
        producer.setNamesrvAddr("10.16.34.232:9876");
        try {
            String str = "{\"app\":{\"id\":548,\"aimsId\":\"gamma-agent\",\"groupId\":100372,\"groupName\":\"通用研发组\",\"userId\":null,\"userName\":null,\"projectId\":660,\"applicationName\":\"gamma-agent\",\"applicationDesc\":\"gamma-agent\",\"type\":\"group\",\"namespacePath\":\"servicemesh\",\"repoUrl\":\"https://gitlab.ziroom.com/servicemesh/gamma-agent.git\",\"registerTime\":1577696233000,\"language\":\"java\",\"systemType\":\"go\",\"binaryPath\":null,\"binaryType\":\"tar.gz\",\"domainName\":\"gamma-agent.ziroom.com\",\"binaryPackageName\":null,\"hasRelated\":true},\"image\":\"harbor.ziroom.com/dongh38/hello-omega:release_20200210183230_daily-24425\",\"branch\":\"release_20200210183230_daily\",\"ciPipelineId\":\"24425\",\"deployment\":{\"metadata\":{\"name\":\"hello-omega-deployment\",\"namespace\":\"tech-daily\",\"selfLink\":\"/apis/apps/v1/namespaces/tech-daily/deployments/hello-omega-deployment\",\"uid\":\"d79db4c3-2551-11ea-b29c-00621a4e64d9\",\"resourceVersion\":\"56175955\",\"generation\":102,\"creationTimestamp\":\"2019-12-23T07:00:02Z\",\"labels\":{\"app\":\"hello-omega\",\"ziroom.com/clusterId\":\"test\",\"ziroom.com/domain\":\"hello-omega.kt.ziroom.com\",\"ziroom.com/https\":\"true\",\"ziroom.com/port\":\"8081\",\"ziroom.com/svcName\":\"hello-omega\"},\"annotations\":{\"deployment.kubernetes.io/revision\":\"102\"}},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"hello-omega\"}},\"template\":{\"metadata\":{\"creationTimestamp\":null,\"labels\":{\"app\":\"hello-omega\",\"random\":\"NZfqTcGViSNH7tbcvk\",\"ziroom.com/clusterId\":\"test\",\"ziroom.com/deploymentName\":\"hello-omega-deployment\",\"ziroom.com/domain\":\"hello-omega.kt.ziroom.com\",\"ziroom.com/https\":\"true\",\"ziroom.com/port\":\"8081\",\"ziroom.com/svcName\":\"hello-omega\"}},\"spec\":{\"volumes\":[{\"name\":\"host-time\",\"hostPath\":{\"path\":\"/etc/localtime\",\"type\":\"\"}},{\"name\":\"dns\",\"hostPath\":{\"path\":\"/data/k8s/mountfile/resolv.conf\",\"type\":\"\"}},{\"name\":\"applogs\",\"hostPath\":{\"path\":\"/data/k8s-applogs/tech-daily/hello-omega-deployment\",\"type\":\"\"}},{\"name\":\"sidecarlogs\",\"hostPath\":{\"path\":\"/data/sidecarlogs/tech-daily/hello-omega-deployment\",\"type\":\"\"}},{\"name\":\"config-volume\",\"configMap\":{\"name\":\"hello-omega-config\",\"defaultMode\":420}}],\"containers\":[{\"name\":\"omega-image\",\"image\":\"harbor.ziroom.com/dongh38/hello-omega:release_20200210183230_daily-24425\",\"ports\":[{\"containerPort\":8081,\"protocol\":\"TCP\"}],\"env\":[{\"name\":\"APOLLO_META\",\"value\":\"http://apollometa.t.ziroom.com\"},{\"name\":\"TRACING_OPEN\",\"value\":\"false\"},{\"name\":\"APPLICATION_NAME\",\"value\":\"hello-omega\"},{\"name\":\"APPLICATION_ENV\",\"value\":\"daily\"}],\"resources\":{\"limits\":{\"cpu\":\"1300m\",\"memory\":\"2Gi\"},\"requests\":{\"cpu\":\"50m\",\"memory\":\"1Gi\"}},\"volumeMounts\":[{\"name\":\"host-time\",\"mountPath\":\"/etc/localtime\"},{\"name\":\"applogs\",\"mountPath\":\"/home/ziroom/logs\"},{\"name\":\"dns\",\"mountPath\":\"/etc/resolv.conf\"},{\"name\":\"config-volume\",\"mountPath\":\"/app/conf\"}],\"livenessProbe\":{\"tcpSocket\":{\"port\":8081},\"initialDelaySeconds\":20,\"timeoutSeconds\":1,\"periodSeconds\":20,\"successThreshold\":1,\"failureThreshold\":6},\"readinessProbe\":{\"tcpSocket\":{\"port\":8081},\"initialDelaySeconds\":25,\"timeoutSeconds\":1,\"periodSeconds\":10,\"successThreshold\":1,\"failureThreshold\":6},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"IfNotPresent\",\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_TIME\"]},\"procMount\":\"Default\"}},{\"name\":\"sc\",\"image\":\"harbor.ziroom.com/public/sidecar:2020-02-12\",\"resources\":{},\"volumeMounts\":[{\"name\":\"host-time\",\"mountPath\":\"/etc/localtime\"},{\"name\":\"sidecarlogs\",\"mountPath\":\"/home/ziroom/logs\"},{\"name\":\"dns\",\"mountPath\":\"/etc/resolv.conf\"},{\"name\":\"config-volume\",\"mountPath\":\"/app/conf\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"IfNotPresent\",\"securityContext\":{\"privileged\":true,\"runAsUser\":0,\"procMount\":\"Default\"}},{\"name\":\"gamma-agent\",\"image\":\"harbor.ziroom.com/tech/gamma-agent:0.0.6\",\"env\":[{\"name\":\"APPLICATION_NAME\",\"value\":\"hello-omega\"},{\"name\":\"APPLICATION_PORT\",\"value\":\"8081\"},{\"name\":\"APPLICATION_DEPLOYMENT_NAME\",\"value\":\"hello-omega-deployment\"},{\"name\":\"APPLICATION_NAMESPACE\",\"value\":\"tech-daily\"},{\"name\":\"NACOS_NAMESPACE_ID\",\"value\":\"e5290469-ada8-440a-b52d-1cd4d2cff8dd\"},{\"name\":\"APP_IP\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"status.podIP\"}}}],\"resources\":{},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"IfNotPresent\",\"securityContext\":{\"privileged\":true,\"runAsUser\":0,\"procMount\":\"Default\"}}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"securityContext\":{\"runAsUser\":1000,\"fsGroup\":1000},\"schedulerName\":\"default-scheduler\"}},\"strategy\":{\"type\":\"RollingUpdate\",\"rollingUpdate\":{\"maxUnavailable\":0,\"maxSurge\":1}},\"revisionHistoryLimit\":10,\"progressDeadlineSeconds\":600},\"status\":{\"observedGeneration\":102,\"replicas\":1,\"updatedReplicas\":1,\"readyReplicas\":1,\"availableReplicas\":1,\"conditions\":[{\"type\":\"Available\",\"status\":\"True\",\"lastUpdateTime\":\"2020-02-10T11:01:11Z\",\"lastTransitionTime\":\"2020-02-10T11:01:11Z\",\"reason\":\"MinimumReplicasAvailable\",\"message\":\"Deployment has minimum availability.\"},{\"type\":\"Progressing\",\"status\":\"True\",\"lastUpdateTime\":\"2020-02-12T09:10:28Z\",\"lastTransitionTime\":\"2020-01-08T02:45:24Z\",\"reason\":\"NewReplicaSetAvailable\",\"message\":\"ReplicaSet \\\"hello-omega-deployment-545bbdc884\\\" has successfully progressed.\"}]}}}\n";
            producer.start();
            Message msg = new Message("AIMS_EVENTS","push","1",str.getBytes());
            SendResult send = producer.send(msg);
            System.out.println(JSON.toJSONString(send));


        }catch (Exception e){
            e.printStackTrace();
        }
    }

}
